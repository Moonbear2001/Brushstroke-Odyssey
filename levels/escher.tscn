[gd_scene load_steps=16 format=3 uid="uid://cyjue85li2vvi"]

[ext_resource type="Script" path="res://levels/escher.gd" id="1_4wu67"]
[ext_resource type="Texture2D" uid="uid://itloebjy8f4f" path="res://art/Esher/back_arch.png" id="1_a1ib6"]
[ext_resource type="Texture2D" uid="uid://clan7geli6b5e" path="res://art/Esher/parallax_layers/background.png" id="1_db3fk"]
[ext_resource type="Texture2D" uid="uid://d0skuom564unj" path="res://art/Esher/parallax_layers/midground.png" id="2_3cojc"]
[ext_resource type="Texture2D" uid="uid://l5bm1kfpyuix" path="res://art/Esher/first_house.png" id="2_12ntw"]
[ext_resource type="Texture2D" uid="uid://cxev8semuld5f" path="res://art/Esher/wide_block.png" id="3_4o60w"]
[ext_resource type="Texture2D" uid="uid://dvr3e0n2qw5ho" path="res://art/Esher/short_block.png" id="4_t8kp2"]
[ext_resource type="Texture2D" uid="uid://bh7kjif1d0eop" path="res://art/Esher/second_structure.png" id="5_yolr1"]
[ext_resource type="PackedScene" uid="uid://bqbvdpmlbbk1a" path="res://characters/protagonist.tscn" id="6_4djpo"]
[ext_resource type="Texture2D" uid="uid://byexiu5j0c54c" path="res://art/Esher/front_arch.png" id="8_lmtet"]
[ext_resource type="PackedScene" uid="uid://b66jvbecg4tog" path="res://objects/door.tscn" id="10_w7r7g"]
[ext_resource type="PackedScene" uid="uid://bahnmeoluag07" path="res://objects/death.tscn" id="17_npv7l"]
[ext_resource type="PackedScene" uid="uid://bc6rebuuy2i1k" path="res://objects/lever.tscn" id="21_pvfto"]

[sub_resource type="Animation" id="Animation_sl3vk"]
resource_name = "move_into_position"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 335), Vector2(0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2xf7l"]
_data = {
"move_into_position": SubResource("Animation_sl3vk")
}

[node name="Escher" type="Node2D"]
script = ExtResource("1_4wu67")

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.3, 0.3)

[node name="Background" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
modulate = Color(0.556863, 0.556863, 0.556863, 1)
position = Vector2(1653.29, 338.86)
scale = Vector2(0.332007, 0.332007)
texture = ExtResource("1_db3fk")

[node name="ParallaxLayer2" type="ParallaxLayer" parent="ParallaxBackground"]
modulate = Color(0.784314, 0.784314, 0.784314, 1)
motion_scale = Vector2(0.5, 0.5)

[node name="Midground" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer2"]
position = Vector2(1639.8, 342.199)
scale = Vector2(0.330844, 0.330844)
texture = ExtResource("2_3cojc")

[node name="BackArch" type="Sprite2D" parent="."]
position = Vector2(1224, 338)
scale = Vector2(0.251455, 0.251455)
texture = ExtResource("1_a1ib6")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
metadata/_edit_group_ = true

[node name="FirstHouse" type="Sprite2D" parent="StaticBody2D"]
position = Vector2(549, 433)
scale = Vector2(0.28, 0.28)
texture = ExtResource("2_12ntw")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
position = Vector2(0, 80)
polygon = PackedVector2Array(-16, 408, 184, 408, 184, 216, 296, 112, 408, 216, 408, 424, 527, 430, 527, 512, 472, 512, 472, 568, 584, 568, 584, 432, 640, 432, 640, 208, 656, 192, 672, 216, 672, 512, 776, 512, 776, 488, 808, 488, 808, 464, 832, 464, 832, 432, 864, 432, 864, 408, 896, 408, 896, 432, 976, 432, 976, 376, 1104, 376, 1112, 376, 1112, 400, 1088, 400, 1088, 432, 1056, 432, 1056, 456, 1032, 456, 1032, 488, 1000, 488, 1000, 512, 976, 512, 976, 544, 944, 544, 944, 648, -16, 648)

[node name="StaticBody2D4" type="StaticBody2D" parent="."]
metadata/_edit_group_ = true

[node name="WideBlock" type="Sprite2D" parent="StaticBody2D4"]
position = Vector2(1232, 400)
scale = Vector2(0.09375, 0.09375)
texture = ExtResource("3_4o60w")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D4"]
polygon = PackedVector2Array(1176, 376, 1176, 424, 1296, 424, 1288, 376)

[node name="MovingPlatform1" type="StaticBody2D" parent="."]
position = Vector2(0, 337)
metadata/_edit_group_ = true

[node name="ShortBlock" type="Sprite2D" parent="MovingPlatform1"]
position = Vector2(1376, 368)
scale = Vector2(0.0923332, 0.0923332)
texture = ExtResource("4_t8kp2")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MovingPlatform1"]
polygon = PackedVector2Array(1352, 344, 1352, 392, 1408, 392, 1408, 344)

[node name="AnimationPlayer" type="AnimationPlayer" parent="MovingPlatform1"]
libraries = {
"": SubResource("AnimationLibrary_2xf7l")
}

[node name="BlueDoor2" parent="MovingPlatform1" instance=ExtResource("10_w7r7g")]
position = Vector2(1391, 440)
scale = Vector2(0.3, 0.3)
gravity_dir = "up"
id = 7
exit_id = 5
direction = "left"
color = "blue"
state = "closed"
metadata/_edit_group_ = true

[node name="StaticBody2D2" type="StaticBody2D" parent="."]

[node name="SecondStructure" type="Sprite2D" parent="StaticBody2D2"]
position = Vector2(1713, 321)
scale = Vector2(0.272221, 0.272221)
texture = ExtResource("5_yolr1")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D2"]
position = Vector2(-4.50718, 2.21656)
scale = Vector2(1.00336, 1.00336)
polygon = PackedVector2Array(1481, 633, 1482, 315, 1560, 312, 1561.26, 3.77077, 1630.03, 3.77077, 1630.03, 57.5899, 1656.94, 57.5899, 1656.94, 136.325, 1650.96, 156.258, 1603.12, 156.258, 1603.12, 257.917, 1682.85, 257.917, 1682.85, 336.652, 1732.69, 336.652, 1732.69, 438.311, 1758.6, 438.311, 1758.6, 466.217, 1786.5, 466.217, 1786.5, 492.13, 1812.42, 492.13, 1812.42, 517.046, 1945.97, 517.046, 1946, 564, 1591, 564, 1582, 546, 1584, 527, 1609, 522, 1612, 500, 1635, 493, 1640, 470, 1661, 465, 1665, 443, 1693, 436, 1693, 384, 1512, 386, 1514, 447, 1534, 446, 1536, 616, 1946, 615, 1945, 637)

[node name="Protagonist" parent="." instance=ExtResource("6_4djpo")]
position = Vector2(62, 455)

[node name="StaticBody2D5" type="StaticBody2D" parent="."]
metadata/_edit_group_ = true

[node name="FrontArch" type="Sprite2D" parent="StaticBody2D5"]
position = Vector2(1238, 328)
scale = Vector2(0.22, 0.22)
texture = ExtResource("8_lmtet")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D5"]
position = Vector2(1, -8)
polygon = PackedVector2Array(1211, 265, 1244, 264, 1253, 274, 1221, 275)

[node name="SmolGrain" type="Sprite2D" parent="."]
position = Vector2(856, 548)
scale = Vector2(99.5, 99.5)

[node name="RedDoor0" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(167, 466)
scale = Vector2(0.3, 0.3)
id = 0
exit_id = 1
x_offset = -50
direction = "left"
color = "red"
state = "closed"
metadata/_edit_group_ = true

[node name="RedDoor1" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(429, 461)
scale = Vector2(0.3, 0.3)
id = 1
enter = false
x_offset = 30
direction = "right"
color = "red"
state = "closed"
metadata/_edit_group_ = true

[node name="RedDoor2" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(617, 469)
scale = Vector2(0.3, 0.3)
id = 2
exit_id = 0
direction = "left"
color = "red"
state = "closed"
metadata/_edit_group_ = true

[node name="YellowDoor0" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(491, 624)
scale = Vector2(0.3, 0.3)
id = 3
exit_id = 4
x_offset = 50
direction = "right"
color = "orange"
state = "closed"
metadata/_edit_group_ = true

[node name="YellowDoor1" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(685, 568)
scale = Vector2(0.3, 0.3)
id = 4
exit_id = 3
x_offset = 50
direction = "right"
color = "orange"
state = "closed"
metadata/_edit_group_ = true

[node name="BlueDoor0" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(954, 468)
scale = Vector2(0.3, 0.3)
id = 5
exit_id = 6
x_offset = -50
direction = "left"
color = "blue"
state = "closed"
metadata/_edit_group_ = true

[node name="BlueDoor1" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(972, 666)
rotation = 3.14159
scale = Vector2(0.3, 0.3)
gravity_dir = "up"
id = 6
enter = false
direction = "left"
color = "blue"
state = "closed"
metadata/_edit_group_ = true

[node name="RedDoor3" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(1538, 271)
scale = Vector2(0.3, 0.3)
id = 8
exit_id = 9
direction = "left"
color = "red"
state = "closed"
metadata/_edit_group_ = true

[node name="RedDoor4" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(1663, 22)
rotation = 1.5708
scale = Vector2(0.3, 0.3)
gravity_dir = "left"
id = 9
exit_id = 8
y_offset = 25
direction = "right"
color = "red"
state = "closed"
metadata/_edit_group_ = true

[node name="YellowDoor2" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(1625, 240)
scale = Vector2(0.3, 0.3)
id = 10
exit_id = 11
x_offset = 50
direction = "right"
color = "orange"
state = "closed"
metadata/_edit_group_ = true

[node name="YellowDoor3" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(1688, 403)
scale = Vector2(0.3, 0.3)
id = 11
exit_id = 10
direction = "left"
color = "orange"
state = "closed"
metadata/_edit_group_ = true

[node name="BlueDoor3" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(1533, 429)
scale = Vector2(0.3, 0.3)
id = 12
exit_id = 13
direction = "right"
color = "blue"
state = "closed"
metadata/_edit_group_ = true

[node name="BlueDoor4" parent="." instance=ExtResource("10_w7r7g")]
position = Vector2(1849, 511)
rotation = 1.5708
scale = Vector2(0.3, 0.3)
gravity_dir = "left"
id = 13
exit_id = 12
direction = "left"
color = "blue"
state = "closed"
metadata/_edit_group_ = true

[node name="Death" parent="." instance=ExtResource("17_npv7l")]
position = Vector2(1888, -73)

[node name="Death2" parent="." instance=ExtResource("17_npv7l")]
position = Vector2(1888, 794)

[node name="Lever" parent="." instance=ExtResource("21_pvfto")]
position = Vector2(1275, 463)
rotation = 3.14159
scale = Vector2(0.05, 0.05)

[connection signal="lever_toggled" from="Lever" to="." method="_on_lever_lever_toggled"]
